# æœ¬ç‰©ã®SBTï¼ˆSoulbound Tokenï¼‰ç„¡æ–™å®Ÿè£…ã‚¬ã‚¤ãƒ‰

## ğŸ¯ çµè«–ï¼šç„¡æ–™å®Ÿè£…ã¯å¯èƒ½

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¨ã£ã¦**å®Œå…¨ç„¡æ–™**ã§SBTã‚’å—ã‘å–ã‚Œã‚‹ä»•çµ„ã¿ã¯å®Ÿè£…å¯èƒ½ã§ã™ã€‚

---

## ğŸ“Š ç„¡æ–™åŒ–ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒæ¯”è¼ƒ

### 1. Gasless Transactionï¼ˆPaymasterï¼‰

æœ€ã‚‚ç¾å®Ÿçš„ãªæ–¹æ³•ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ç½²åã ã‘ã§ã€ã‚¢ãƒ—ãƒªå´ãŒã‚¬ã‚¹ä»£ã‚’è² æ‹…ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Paymaster Flow                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ãƒ¦ãƒ¼ã‚¶ãƒ¼                     ã‚¢ãƒ—ãƒª                   ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³
     â”‚                          â”‚                          â”‚
     â”‚  1. ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç½²å   â”‚                          â”‚
     â”‚  ï¼ˆã‚¬ã‚¹ä»£ãªã—ï¼‰           â”‚                          â”‚
     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶                          â”‚
     â”‚                          â”‚                          â”‚
     â”‚                          â”‚  2. PaymasterçµŒç”±ã§é€ä¿¡   â”‚
     â”‚                          â”‚  ï¼ˆã‚¢ãƒ—ãƒªãŒã‚¬ã‚¹ä»£è² æ‹…ï¼‰    â”‚
     â”‚                          â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                          â”‚                          â”‚
     â”‚                          â”‚  3. SBTç™ºè¡Œ              â”‚
     â”‚                          â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                          â”‚                          â”‚
     â”‚  4. SBTå—ã‘å–ã‚Šå®Œäº†       â”‚                          â”‚
     â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚
```

### 2. ã‚³ã‚¹ãƒˆæ¯”è¼ƒ

| ãƒã‚§ãƒ¼ãƒ³ | ã‚¬ã‚¹ä»£/ç™ºè¡Œ | Paymasteråˆ©ç”¨æ™‚ | æœˆé–“ã‚³ã‚¹ãƒˆï¼ˆ1000ç™ºè¡Œï¼‰ |
|----------|-------------|-----------------|----------------------|
| Ethereum | ~$5-20 | ã‚¢ãƒ—ãƒªè² æ‹… | $5,000-20,000 |
| Polygon | ~$0.01 | ã‚¢ãƒ—ãƒªè² æ‹… | ~$10 |
| Base | ~$0.005 | ã‚¢ãƒ—ãƒªè² æ‹… | ~$5 |
| **Base + Paymaster** | **$0** | **ãƒ¦ãƒ¼ã‚¶ãƒ¼ç„¡æ–™** | **~$5** |

---

## ğŸ› ï¸ å®Ÿè£…æ–¹æ³•

### ã‚¹ãƒ†ãƒƒãƒ—1: Baseã«ãƒ‡ãƒ—ãƒ­ã‚¤

Baseã¯CoinbaseãŒé‹å–¶ã™ã‚‹L2ã§ã€ã‚¬ã‚¹ä»£ãŒéå¸¸ã«å®‰ã„ã€‚

```bash
# Foundryã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
curl -L https://foundry.paradigm.xyz | bash
foundryup

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
forge init trust-sbt
cd trust-sbt

# OpenZeppelinã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
forge install OpenZeppelin/openzeppelin-contracts
```

### ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```javascript
// scripts/deploy.js
const { ethers } = require("hardhat");

async function main() {
  const TrustSBT = await ethers.getContractFactory("TrustSBT");
  const sbt = await TrustSBT.deploy();

  await sbt.deployed();
  console.log("TrustSBT deployed to:", sbt.address);
}

main().catch((error) => {
  console.error(error);
  process.exitCode = 1;
});
```

### ã‚¹ãƒ†ãƒƒãƒ—3: Gaslessè¨­å®šï¼ˆAlchemy/Infuraï¼‰

Alchemyã®Gaslessæ©Ÿèƒ½ã‚’ä½¿ã†ã¨ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ç½²åã ã‘ã§ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å¯èƒ½ã€‚

```typescript
// lib/sbt-client.ts
import { Alchemy, Network } from "alchemy-sdk";
import { ethers } from "ethers";

const config = {
  apiKey: process.env.ALCHEMY_API_KEY,
  network: Network.BASE_MAINNET,
};

const alchemy = new Alchemy(config);

// Gasless SBTç™ºè¡Œ
export async function mintSBTGasless(
  userWallet: string,
  userSignature: string
) {
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç½²åã‚’æ¤œè¨¼
  const signer = await verifySignature(userSignature);

  // PaymasterçµŒç”±ã§ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³é€ä¿¡
  const tx = await alchemy.transact.sendPrivateTransaction({
    to: SBT_CONTRACT_ADDRESS,
    data: encodeMintData(userWallet),
    from: userWallet,
    // PaymasterãŒã‚¬ã‚¹ä»£ã‚’è² æ‹…
    maxFeePerGas: "0x0",
    maxPriorityFeePerGas: "0x0",
  });

  return tx;
}
```

---

## ğŸ’° ã‚³ã‚¹ãƒˆè©¦ç®—

### å°è¦æ¨¡é‹ç”¨ï¼ˆæœˆ100äººï¼‰

| é …ç›® | ã‚³ã‚¹ãƒˆ |
|------|--------|
| Baseã‚¬ã‚¹ä»£ | ~$0.50 |
| Alchemy Freeãƒ—ãƒ©ãƒ³ | $0 |
| **åˆè¨ˆ** | **~$0.50/æœˆ** |

### ä¸­è¦æ¨¡é‹ç”¨ï¼ˆæœˆ1000äººï¼‰

| é …ç›® | ã‚³ã‚¹ãƒˆ |
|------|--------|
| Baseã‚¬ã‚¹ä»£ | ~$5 |
| Alchemy Growthãƒ—ãƒ©ãƒ³ | $49 |
| **åˆè¨ˆ** | **~$54/æœˆ** |

### å¤§è¦æ¨¡é‹ç”¨ï¼ˆæœˆ10000äººï¼‰

| é …ç›® | ã‚³ã‚¹ãƒˆ |
|------|--------|
| Baseã‚¬ã‚¹ä»£ | ~$50 |
| Alchemy Enterprise | $300+ |
| **åˆè¨ˆ** | **~$350/æœˆ** |

---

## ğŸ”§ å®Ÿè£…ã®ç°¡æ˜“ç‰ˆ

ãƒ†ã‚¹ãƒˆãƒãƒƒãƒˆï¼ˆBase Sepoliaï¼‰ãªã‚‰å®Œå…¨ç„¡æ–™ã§è©¦ã›ã¾ã™ï¼š

```typescript
// lib/sbt-service.ts
import { ethers } from "ethers";
import TrustSBT from "../contracts/TrustSBT.json";

const SBT_ADDRESS = process.env.NEXT_PUBLIC_SBT_ADDRESS!;
const RPC_URL = process.env.NEXT_PUBLIC_RPC_URL!;

export class SBTService {
  private provider: ethers.JsonRpcProvider;
  private wallet: ethers.Wallet;
  private contract: ethers.Contract;

  constructor() {
    this.provider = new ethers.JsonRpcProvider(RPC_URL);
    this.wallet = new ethers.Wallet(process.env.PRIVATE_KEY!, this.provider);
    this.contract = new ethers.Contract(SBT_ADDRESS, TrustSBT.abi, this.wallet);
  }

  // SBTç™ºè¡Œï¼ˆåˆå›ã®ã¿ï¼‰
  async mintSBT(userWallet: string) {
    const tx = await this.contract.mintSBT(userWallet);
    await tx.wait();
    return tx.hash;
  }

  // ä¿¡é ¼æ€§ã‚¹ã‚³ã‚¢æ›´æ–°
  async updateTrust(
    userWallet: string,
    points: number,
    correct: number,
    incorrect: number,
    level: number
  ) {
    const tx = await this.contract.updateTrust(
      userWallet,
      points,
      correct,
      incorrect,
      level
    );
    await tx.wait();
    return tx.hash;
  }

  // ä¿¡é ¼æ€§ãƒ‡ãƒ¼ã‚¿å–å¾—
  async getTrustData(userWallet: string) {
    return await this.contract.getTrustData(userWallet);
  }
}
```

---

## ğŸ“‹ å®Œå…¨ç„¡æ–™ã§é‹ç”¨ã™ã‚‹ãŸã‚ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### âœ… æ¨å¥¨æ§‹æˆ

- [ ] **ãƒã‚§ãƒ¼ãƒ³**: Baseï¼ˆã¾ãŸã¯Base Sepolia for testï¼‰
- [ ] **RPC**: Alchemy Freeãƒ—ãƒ©ãƒ³ï¼ˆæœˆ300M compute unitsï¼‰
- [ ] **Paymaster**: Alchemy Gaslessï¼ˆæœˆ1000ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç„¡æ–™ï¼‰
- [ ] **ãƒ‡ãƒ—ãƒ­ã‚¤**: ä¸€å›ã®ã¿ ~$1-2

### âš ï¸ æ³¨æ„ç‚¹

1. **åˆæœŸãƒ‡ãƒ—ãƒ­ã‚¤è²»ç”¨**: ~$1-2å¿…è¦ï¼ˆBaseã®å ´åˆï¼‰
2. **Paymasterã®åˆ¶é™**: ç„¡æ–™ãƒ—ãƒ©ãƒ³ã¯æœˆ1000ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³
3. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: ç§˜å¯†éµã®ç®¡ç†ã«æ³¨æ„

---

## ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. Base Sepoliaï¼ˆãƒ†ã‚¹ãƒˆãƒãƒƒãƒˆï¼‰ã§SBTã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤
2. ã‚¢ãƒ—ãƒªã«çµ±åˆã—ã¦å‹•ä½œç¢ºèª
3. æœ¬ç•ªï¼ˆBase Mainnetï¼‰ã«ãƒ‡ãƒ—ãƒ­ã‚¤
4. Paymasterã‚’è¨­å®šã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ç„¡æ–™åŒ–

---

## ğŸ“š å‚è€ƒãƒªãƒ³ã‚¯

- [Base Documentation](https://docs.base.org/)
- [Alchemy Gasless](https://www.alchemy.com/gasless)
- [ERC-5192 Spec](https://eips.ethereum.org/EIPS/eip-5192)
- [OpenZeppelin Contracts](https://docs.openzeppelin.com/)
